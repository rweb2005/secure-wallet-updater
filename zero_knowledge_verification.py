// Refactor contract state machine design
// Optimize token minting flow
