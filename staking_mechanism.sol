// Refactor staking logic
// Fix issues with contract state management
